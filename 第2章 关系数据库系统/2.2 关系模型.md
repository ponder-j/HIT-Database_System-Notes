## 关系数据结构

用二维表形式表示实体以及实体之间的联系
关系数据库由表构成
表即关系
  

## 2.2.1 数据结构

- 建立在**集合代数**的基础上
- 单一的数据结构——**关系**
	- 实体和实体间各种联系均用关系来表示
- 数据的逻辑结构——**二维表**
- 基本概念
	- 关系：元组的集合
	- 元组 tuple：用来指代关系表的行；顺序无关紧要
	- 属性 attribute：列；n 元关系有 n 个属性；顺序无关紧要
	- 域 domain：每个允许取值的关系的属性都存在一个集合，称为该属性的域；所有可能属性值的集合
	- 原子域：不可再分
	- 复合域：原子域的组合
	- 空值：null
- 关系模式、关系实例
- 关系数据库

### 关系的性质

- 列是同质的 Homogeneous
- 每一列的分量是同一类型的数据，来自同一个域
- 不同的列可出自同一个域
- 其中的每一列称为一个属性
- 不同的属性要给予不同的属性名
- 列的顺序无所谓
- 列的次序可以任意交换
- 任意两个元组不能完全相同
- 由集合的性质决定
- 但许多关系数据库产品没有遵循这一性质。考试需要满足这一条件。
- 行的顺序无所谓
- 分量必须取原子值
- 每一个分量都必须是不可分的数据项

  

### 关系模式

具有形式 R(U, D, DOM, I, F), 其中

- R：关系名
- U：R 的属性集合 {A1, A2, ..., An}
- D：U 中属性的域集合 {D1, D2, ..., Dn}
- DOM：U 到 D 的映射
- I：完整性约束集合
- F：属性间的函数依赖关系

简单记作 R(U)

- 把属性集合为 U={A1, A2, ..., An} 的关系模式 R 记作 R(A1, A2, ..., An)

  

### 关系实例

填入实际数据

某一时刻现实世界状态的真实反映

  

### 关系数据库模式

- 一组关系模式的集合

### 关系数据库实例

  

## 2.2.2 完整性约束

防止不符合规范的数据进入数据库。DBMS自动按照一定的约束条件对数据进行监测，确保数据库中存储的数据正确、有效、相容。

- 实体完整性
- 参照完整性
- 用户自定义

### 超码 superkey

- 一个或多个属性的集合，这些属性的组合可以在一个关系中唯一地标识一个元组
- 如果一个属性 K 是一个超码，则 K 的任意超集也是超码
- 超码中可能包含无关紧要的属性

### 候选码 candidate key

- K 称为关系 R(U) 的候选码
- K 是 R(U) 的一个超码
- K 的任意真子集都不能成为 R(U) 的超码
- 最小的超码
- 一个关系模式可能有多个候选码

### 主码 primary key

- 被数据库设计者选中的，主要用来在一个关系中区分不同元组的候选码
- 应该选择那些值从不或极少变化的属性
- 主属性：主码中的属性

### 外码 foreign key

- 一个关系模式 r1 可能在它的属性中包括另一个关系模式 r2 的主码，这个属性集合在 r1 上称作**参照 r2 的外码**。
- 外码不一定要与相应的主码同名
- 一般情况下取相同名字，便于识别

### 完整性约束

- 实体完整性约束
- 如果 A 是主属性，则 A 不能取空值
- 保证主属性不空与关系模式用主码**唯一识别元组**是统一的
- 参照完整性约束
- 定义主码与外码之间的规则
- 要求参照关系中任意元组在特定属性上的取值必然等于被参照关系中某个元组在特定属性上的取值
- 目的是保证数据的一致性
- 用户完整性约束
- 语义完整性
- 函数依赖
- ……